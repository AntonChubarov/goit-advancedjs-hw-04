{"version":3,"file":"commonHelpers.js","sources":["../src/pixabay.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '16340491-42d6a19746059c85d486dedcd';\n\nexport const fetchImages = async (query, page, perPage) => {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: apiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    if (!response.data.hits.length) {\n      throw new Error('Sorry, there are no images matching your search query. Please try again.');\n    }\n\n    const filteredHits = response.data.hits.map(hit => ({\n      webformatURL: hit.webformatURL,\n      largeImageURL: hit.largeImageURL,\n      tags: hit.tags,\n      likes: hit.likes,\n      views: hit.views,\n      comments: hit.comments,\n      downloads: hit.downloads,\n    }));\n\n    return { totalHits: response.data.totalHits, hits: filteredHits };\n\n  } catch (error) {\n    throw new Error(error.message);\n  }\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './pixabay.js';\n\nconst perPage = 40;\nlet currentPage = 1;\nlet totalHits = 0;\nlet currentQuery = '';\n\nconst loadMoreButton = document.querySelector('.load-more');\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\n\nconst showElement = (element) => {\n  element.classList.remove('visually-hidden');\n};\n\nconst hideElement = (element) => {\n  element.classList.add('visually-hidden');\n};\n\nconst generateImageMarkup = (image) => {\n  return `\n    <div class=\"photo-card\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b> ${image.likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b> ${image.views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b> ${image.comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b> ${image.downloads}\n        </p>\n      </div>\n    </div>\n  `;\n};\n\nconst displayImages = (images) => {\n  const markup = images.map(generateImageMarkup).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nconst updateLoadMoreButton = () => {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (currentPage * perPage >= totalHits) {\n    hideElement(loadMoreButton);\n    iziToast.info({\n      title: 'Info', message: 'We\\'re sorry, but you\\'ve reached the end of search results',\n    });\n  } else {\n    showElement(loadMoreButton);\n  }\n};\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  gallery.innerHTML = '';\n  hideElement(loadMoreButton);\n\n  const query = event.target.elements.searchQuery.value.trim();\n  if (query === '') {\n    iziToast.error({\n      title: 'Error', message: 'Please enter a search query',\n    });\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage, perPage);\n    totalHits = data.totalHits;\n    iziToast.info({\n      message: `Hooray! We found ${totalHits} images`,\n    });\n    displayImages(data.hits);\n    updateLoadMoreButton();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error', message: error.message,\n    });\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage, perPage);\n    displayImages(data.hits);\n    updateLoadMoreButton();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error', message: error.message,\n    });\n  }\n});\n\nhideElement(loadMoreButton);\n"],"names":["apiKey","fetchImages","query","page","perPage","response","axios","filteredHits","hit","error","currentPage","totalHits","currentQuery","loadMoreButton","searchForm","gallery","showElement","element","hideElement","generateImageMarkup","image","displayImages","images","markup","updateLoadMoreButton","iziToast","event","data"],"mappings":"6vBAEA,MAAMA,EAAS,qCAEFC,EAAc,MAAOC,EAAOC,EAAMC,IAAY,CACzD,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKN,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACP,CAAK,EAED,GAAI,CAACC,EAAS,KAAK,KAAK,OACtB,MAAM,IAAI,MAAM,0EAA0E,EAG5F,MAAME,EAAeF,EAAS,KAAK,KAAK,IAAIG,IAAQ,CAClD,aAAcA,EAAI,aAClB,cAAeA,EAAI,cACnB,KAAMA,EAAI,KACV,MAAOA,EAAI,MACX,MAAOA,EAAI,MACX,SAAUA,EAAI,SACd,UAAWA,EAAI,SAChB,EAAC,EAEF,MAAO,CAAE,UAAWH,EAAS,KAAK,UAAW,KAAME,EAEpD,OAAQE,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,OAAO,CAC9B,CACH,EChCML,EAAU,GAChB,IAAIM,EAAc,EACdC,EAAY,EACZC,EAAe,GAEnB,MAAMC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAeC,GAAY,CAC/BA,EAAQ,UAAU,OAAO,iBAAiB,CAC5C,EAEMC,EAAeD,GAAY,CAC/BA,EAAQ,UAAU,IAAI,iBAAiB,CACzC,EAEME,EAAuBC,GACpB;AAAA;AAAA,kBAESA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,yBAG/BA,EAAM,KAAK;AAAA;AAAA;AAAA,yBAGXA,EAAM,KAAK;AAAA;AAAA;AAAA,4BAGRA,EAAM,QAAQ;AAAA;AAAA;AAAA,6BAGbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,IAOtCC,EAAiBC,GAAW,CAChC,MAAMC,EAASD,EAAO,IAAIH,CAAmB,EAAE,KAAK,EAAE,EACtDJ,EAAQ,mBAAmB,YAAaQ,CAAM,CAChD,EAEMC,EAAuB,IAAM,CACjC,MAAMX,EAAiB,SAAS,cAAc,YAAY,EACtDH,EAAcN,GAAWO,GAC3BO,EAAYL,CAAc,EAC1BY,EAAS,KAAK,CACZ,MAAO,OAAQ,QAAS,2DAC9B,CAAK,GAEDT,EAAYH,CAAc,CAE9B,EAEAC,EAAW,iBAAiB,SAAU,MAAOY,GAAU,CACrDA,EAAM,eAAc,EAEpBX,EAAQ,UAAY,GACpBG,EAAYL,CAAc,EAE1B,MAAMX,EAAQwB,EAAM,OAAO,SAAS,YAAY,MAAM,OACtD,GAAIxB,IAAU,GAAI,CAChBuB,EAAS,MAAM,CACb,MAAO,QAAS,QAAS,6BAC/B,CAAK,EACD,MACD,CAEDb,EAAeV,EACfQ,EAAc,EAEd,GAAI,CACF,MAAMiB,EAAO,MAAM1B,EAAYW,EAAcF,EAAaN,CAAO,EACjEO,EAAYgB,EAAK,UACjBF,EAAS,KAAK,CACZ,QAAS,oBAAoBd,CAAS,SAC5C,CAAK,EACDU,EAAcM,EAAK,IAAI,EACvBH,GACD,OAAQf,EAAO,CACdgB,EAAS,MAAM,CACb,MAAO,QAAS,QAAShB,EAAM,OACrC,CAAK,CACF,CACH,CAAC,EAEDI,EAAe,iBAAiB,QAAS,SAAY,CACnDH,GAAe,EAEf,GAAI,CACF,MAAMiB,EAAO,MAAM1B,EAAYW,EAAcF,EAAaN,CAAO,EACjEiB,EAAcM,EAAK,IAAI,EACvBH,GACD,OAAQf,EAAO,CACdgB,EAAS,MAAM,CACb,MAAO,QAAS,QAAShB,EAAM,OACrC,CAAK,CACF,CACH,CAAC,EAEDS,EAAYL,CAAc"}