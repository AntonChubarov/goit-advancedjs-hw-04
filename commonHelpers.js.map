{"version":3,"file":"commonHelpers.js","sources":["../src/pixabay.js","../src/main.js"],"sourcesContent":["const apiKey = '16340491-42d6a19746059c85d486dedcd';\n\nexport const fetchImages = (query, page, perPage) => {\n  return new Promise((resolve, reject) => {\n    fetch(`https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(`Failed to fetch images. Status code ${response.status}`);\n        }\n        return response.json();\n      })\n      .then(data => {\n        if (data.hits.length === 0) {\n          reject(new Error('Sorry, there are no images matching your search query. Please try again.'));\n        } else {\n          const filteredHits = data.hits.map(hit => ({\n            webformatURL: hit.webformatURL,\n            largeImageURL: hit.largeImageURL,\n            tags: hit.tags,\n            likes: hit.likes,\n            views: hit.views,\n            comments: hit.comments,\n            downloads: hit.downloads,\n          }));\n          resolve({ totalHits: data.totalHits, hits: filteredHits });\n        }\n      })\n      .catch(error => reject(new Error(`Error fetching images: ${error.message}`)));\n  });\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './pixabay.js';\n\nconst perPage = 40;\nlet currentPage = 1;\nlet totalHits = 0;\nlet currentQuery = '';\n\nconst loadMoreButton = document.querySelector('.load-more');\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\n\nconst showElement = (element) => {\n  element.classList.remove('visually-hidden');\n};\n\nconst hideElement = (element) => {\n  element.classList.add('visually-hidden');\n};\n\nconst generateImageMarkup = (image) => {\n  return `\n    <div class=\"photo-card\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b> ${image.likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b> ${image.views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b> ${image.comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b> ${image.downloads}\n        </p>\n      </div>\n    </div>\n  `;\n};\n\nconst displayImages = (images, append = false) => {\n  const markup = images.map(generateImageMarkup).join('');\n  if (append) {\n    gallery.insertAdjacentHTML('beforeend', markup);\n  } else {\n    gallery.innerHTML = markup;\n  }\n};\n\nconst updateLoadMoreButton = () => {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (currentPage * perPage >= totalHits) {\n    hideElement(loadMoreButton);\n    iziToast.info({\n      title: 'Info', message: 'We\\'re sorry, but you\\'ve reached the end of search results',\n    });\n  } else {\n    showElement(loadMoreButton);\n  }\n};\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  gallery.innerHTML = '';\n  hideElement(loadMoreButton);\n\n  const query = event.target.elements.searchQuery.value.trim();\n  if (query === '') {\n    iziToast.error({\n      title: 'Error', message: 'Please enter a search query',\n    });\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage, perPage);\n    totalHits = data.totalHits;\n    iziToast.info({\n      message: `Hooray! We found ${totalHits} images`,\n    });\n    displayImages(data.hits);\n    updateLoadMoreButton();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error', message: error.message,\n    });\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage, perPage);\n    displayImages(data.hits, true);\n    updateLoadMoreButton();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error', message: error.message,\n    });\n  }\n});\n\nhideElement(loadMoreButton);\n"],"names":["apiKey","fetchImages","query","page","perPage","resolve","reject","response","data","filteredHits","hit","error","currentPage","totalHits","currentQuery","loadMoreButton","searchForm","gallery","showElement","element","hideElement","generateImageMarkup","image","displayImages","images","append","markup","updateLoadMoreButton","iziToast","event"],"mappings":"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"}